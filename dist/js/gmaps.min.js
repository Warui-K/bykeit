/*!
 * bykeit -  v1.0.0 (https://github.com/Warui-K/bykeit#readme)
 * Copyright 2021-2021 
 * Licensed under ISC (https://github.com/Warui-K/bykeit/bykeit/blob/master/LICENSE)
 */

function generateURL(){var e=document.getElementById("pick-address").value,t=document.getElementById("ship-address").value,n=document.getElementById("distance").value,o=document.getElementById("no_selection").value,i=document.getElementById("sender-name").value,d=document.getElementById("sender-contact").value,a=document.getElementById("receiver-name").value,s=document.getElementById("receiver-contact").value,c=document.getElementById("instructions").value;return window.open("https://wa.me/254705719718?text=*Sender%20Name%3A*%20"+encodeURIComponent(i)+"%0A*Sender%20Contact%3A*%20"+encodeURIComponent(d)+"%0A*SENDER%20ADDRESS%3A*%20"+encodeURIComponent(e)+"%0A%0A*Receiver%20Name%3A*%20"+encodeURIComponent(a)+"%0A*Receiver%20Contact%3A*%20"+encodeURIComponent(s)+"%0A*DELIVERY%20ADDRESS%3A*%20%20"+encodeURIComponent(t)+"%0A%0A"+encodeURIComponent(n)+"%0A*******************************%0A_"+encodeURIComponent(o)+"_%0A*******************************%0A%0A*Additional%20Instructions%3A*%20"+encodeURIComponent(c)+"%0A%0AI%20need%20a%20rider%20for%20this%20request."),!1}var infowindow;function initMap(){var e=new google.maps.Map(document.getElementById("map"),{mapTypeControl:!1,center:{lat:-1.292077,lng:36.821936},zoom:14});infowindow=new google.maps.InfoWindow,new AutocompleteDirectionsHandler(e)}function AutocompleteDirectionsHandler(e){this.map=e,this.originPlaceId=null,this.destinationPlaceId=null,this.travelMode="DRIVING";var t=document.getElementById("pick-address"),n=document.getElementById("ship-address");document.getElementById("mode-selector");this.directionsService=new google.maps.DirectionsService,this.directionsDisplay=new google.maps.DirectionsRenderer,this.directionsDisplay.setMap(e);t=new google.maps.places.Autocomplete(t,{placeIdOnly:!0}),n=new google.maps.places.Autocomplete(n,{placeIdOnly:!0});this.setupClickListener("changemode-walking","WALKING"),this.setupClickListener("changemode-transit","TRANSIT"),this.setupClickListener("changemode-driving","DRIVING"),this.setupPlaceChangedListener(t,"ORIG"),this.setupPlaceChangedListener(n,"DEST")}AutocompleteDirectionsHandler.prototype.setupClickListener=function(e,t){var e=document.getElementById(e),n=this;e.addEventListener("click",function(){n.travelMode=t,n.route()})},AutocompleteDirectionsHandler.prototype.setupPlaceChangedListener=function(t,n){var o=this;t.bindTo("bounds",this.map),t.addListener("place_changed",function(){var e=t.getPlace();e.place_id?("ORIG"===n?o.originPlaceId=e.place_id:o.destinationPlaceId=e.place_id,o.route()):window.alert("Please select an option from the dropdown list.")})},AutocompleteDirectionsHandler.prototype.route=function(){var s;this.originPlaceId&&this.destinationPlaceId&&(s=this).directionsService.route({origin:{placeId:this.originPlaceId},destination:{placeId:this.destinationPlaceId},travelMode:this.travelMode},function(e,t){var n,o,i,d,a;"OK"===t?(s.directionsDisplay.setDirections(e),d=e.routes[0].overview_path[Math.floor(e.routes[0].overview_path.length/2)],infowindow.setPosition(d),n=Math.round(e.routes[0].legs[0].distance.value/1e3),a=.8*(o=Math.round(3*Math.round(e.routes[0].legs[0].distance.value/100))),a=10*Math.round(a/10),i="Express Delivery = Ksh "+(o=(o=10*Math.round(o/10))<250?250:o),d=document.getElementById("pick-address").value,a=document.getElementById("ship-address").value,document.getElementById("location_1").value=d,document.getElementById("location_2").value=a,document.getElementById("cost_B").value=i,document.getElementById("distance").value="Distance: "+n+" KM",document.getElementById("no_selection").value="Express Delivery @ Ksh "+o,infowindow.setContent(e.routes[0].legs[0].distance.text)):window.alert("Directions request failed due to "+t)})},google.maps.event.addDomListener(window,"load",initMap);